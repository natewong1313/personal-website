---
import Layout from "../../layouts/main.astro"
import FormattedDate from "../../components/FormattedDate.astro"
import { getCollection } from 'astro:content';

const devBlogCollection = await getCollection("devBlog")
const devPosts = devBlogCollection.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
)
const personalBlogCollection = await getCollection("personalBlog")
const personalPosts = personalBlogCollection.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
)
---
<Layout title="Blog | Nate Wong" description="Read Nate Wong's blog posts about development, technology, and personal projects">
  <div class="w-full max-w-4xl mx-auto my-12">
    <h1 class="text-xl font-semibold">
      <a href="/" class="hover:underline">
Nate's
      </a>
      Blog</h1>
    <p class="mt-4 text-red bg-stone-300 p-2">
      Development
    </p>
    <ul class="space-y-2 py-4">
      {devPosts.map((post) => (
      <li>
        <a href={`/blog/dev-blog/${post.id}`} class="text-stone-500 flex space-x-4 group hover:bg-stone-100 transition-colors">
          <div class="bg-red h-6 w-1 opacity-0 group-hover:opacity-100 transition-opacity"></div>
          <p><FormattedDate date={post.data.pubDate} /></p>
          <p class="text-stone-900">{post.data.title}</p>
        </a>
      </li>
      ))}
    </ul>
    <p class="mt-2 text-red bg-stone-300 p-2">
      Life, ramblings, hobbies, and more
    </p>
    <ul class="space-y-2 py-4">
      {personalPosts.map((post) => (
      <li>
        <a href={`/blog/personal-blog/${post.id}`} class="text-stone-500 flex space-x-4 group hover:bg-stone-100 transition-colors">
          <div class="bg-red h-6 w-1 opacity-0 group-hover:opacity-100 transition-opacity"></div>
          <p><FormattedDate date={post.data.pubDate} /></p>
          <p class="text-stone-900">{post.data.title}</p>
        </a>
      </li>
      ))}
    </ul>
  </div>
</Layout>
